
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

<div class="page-wrapper">
  <div class="content-container">
    <!-- HEADER -->
  <header class="usmp-header">
    <div class="header-left">
      <a href="https://admision.usmp.edu.pe">
        <img src="https://admision.usmp.edu.pe/wp-content/uploads/2022/05/logo_admision.svg" alt="Logo USMP" class="usmp-logo">
      </a>
  
    </div>

    <div class="header-right">
      <div class="social-icons">
        <a href="https://www.facebook.com/admisionUSMPoficial" target="_blank"><i class="fab fa-facebook-f"></i></a>
        <a href="https://wa.link/ep59y2" target="_blank"><i class="fab fa-whatsapp"></i></a>
        <a href="https://www.instagram.com/admision_usmp/?hl=es" target="_blank"><i class="fab fa-instagram"></i></a>
        <a href="https://www.youtube.com/channel/UCU7fnj-10qTK7UHtRe9UdqA" target="_blank"><i class="fab fa-youtube"></i></a>
      </div>
      <div class="contact">
        <i class="fas fa-phone-alt"></i>
        <span>Contáctanos | 01 748 4747</span>
      </div>
    </div>
  </header>


    <div class="main-container">
      <div class="title-section">
        <h2>CONSULTA DE POSTULACIÓN</h2>
      </div>

      <div class="form-container">
        <div class="form-header">
          <div class="form-icon">
            <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
              <polyline points="14,2 14,8 20,8"/>
              <line x1="16" y1="13" x2="8" y2="13"/>
              <line x1="16" y1="17" x2="8" y2="17"/>
              <polyline points="10,9 9,9 8,9"/>
            </svg>
          </div>
          <h3>Ingrese el número de su documento de identidad </h3>
          <p class="form-description">(DNI - Pasaporte - Carnet de extranjería)</p>
        </div>

        <div class="input-section">
          <div class="input-container">
            <div class="input-label">
              <span class="label-text">Número de Documento</span>
              <span class="required">*</span>
            </div>
            <input 
              type="text"
              class="search-input"
              [(ngModel)]="numDocBuscar"
              placeholder="Digite aquí "
              maxlength="8">
            <div class="input-help">
              <small>Ingrese solo números, sin espacios ni guiones</small>
            </div>
          </div>

          <button 
            class="search-btn"
            (click)="buscarEstudiante()"
            [disabled]="cargando || !numDocBuscar || numDocBuscar.length < 8">
            <span class="btn-icon" *ngIf="!cargando">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="11" cy="11" r="8"/>
                <path d="m21 21-4.35-4.35"/>
              </svg>
            </span>
            <span class="btn-text">{{ cargando ? 'Consultando...' : 'Consultar Estado' }}</span>
          </button>
        </div>

        <div class="loading" *ngIf="cargando">
          <div class="spinner"></div>
          <p>Consultando base de datos de postulantes...</p>
          <small>Por favor espere un momento</small>
        </div>

        <!-- Alerta dinámica según el estado -->
        <div 
          class="result-container"
          *ngIf="estudiante && !error">
          <div 
            class="alert"
            [ngClass]="{
              'custom-success': estudiante.estadoAdmision === 'Aprobado',
              'custom-error': estudiante.estadoAdmision === 'Desaprobado', 
              'custom-warning': estudiante.estadoAdmision === 'No especificado'
            }">
            
            <!-- Ícono dinámico según el estado -->
            <div class="status-icon">
              <span *ngIf="estudiante.estadoAdmision === 'Aprobado'">✓</span>
              <span *ngIf="estudiante.estadoAdmision === 'Desaprobado'">✗</span>
              <span *ngIf="estudiante.estadoAdmision === 'No especificado'">⚠</span>
            </div>
            
            <div class="message-content">
              <div class="student-info">
                <h4>Resultado de la Consulta</h4>
                <p>
                  <strong>Postulante:</strong> {{ estudiante.nombre }} {{ estudiante.apellidoPaterno }} {{ estudiante.apellidoMaterno }}
                </p>
                <p>
                  <strong>DNI:</strong> {{ estudiante.numDoc }}
                </p>
                <p>
                  <strong>Estado:</strong> <span class="status-highlight">{{ estudiante.estadoAdmision }}</span>
                </p>
                <p>
                  <strong>Sede:</strong> <span class="status-highlight">{{ estudiante.sede }}</span>
                </p>
              </div>
            </div>
          </div>
        </div>

        <div 
          class="alert error" 
          *ngIf="error">
          <div class="error-icon">⚠</div>
          <div class="error-message">
            <h4>NO SE ENCONTRARON RESULTADOS</h4>
            <p>{{ error }}</p>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>